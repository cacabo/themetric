<div class="container">
  <div class="row">
    <div class="col-12 col-md-10 offset-md-1 col-lg-8 offset-lg-2">
      <div class="space-2"></div>

      <!-- email form -->
      <div class="card">
        <div class="card-block">
          <h4 class="special marg-bot-2">Refer a new contributor</h4>
          <% @referral = Referral.new %>
          <%= bootstrap_form_for(@referral) do |f| %>
            <div class="field special-label marg-bot-1">
              <%= f.email_field :email, class: 'form-control', required: true %>
            </div>
            <%= f.submit "Add new referral", class: 'btn-blue white-text shade-3 hover' %>
          <% end %>
        </div>
      </div>

      <div class="space-2"></div>
      <h2 class="special marg-bot-1">
        Listing all referrals provided
      </h2>
      <% if @referrals and @referrals.length > 0 %>
        <table class="table">
          <thead>
            <tr>
              <th>#</th>
              <th>Email</th>
              <th>Delete</th>
            </tr>
          </thead>
          <tbody>
            <% @referrals.each_with_index do |r, index| %>
              <tr>
                <td><%= index + 1 %></td>
                <td><%= r.email %></td>
                <td>
                  <%= link_to referral_path(r), method: :delete, data: { confirm: 'Delete referral: are you sure you want to delete this referral?' } do %>
                    <i class="fa fa-times text-muted" aria-hidden="true"></i>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <p>
          Looks like we don't have any referred emails on file yet.
        </p>
      <% end %>

      <div class="space-2"></div>
      <%= link_to 'Back to home', root_path, class: 'btn-blue shade-3 hover' %>
      <div class="space-4"></div>
    </div>
  </div>
</div>
